#
# Makefile for powerpc-utils/scripts/amsvis
#

SCRIPTS = amsvis

# Files built from .in files
IN_FILES = Makefile setup.py

MODULES_DIR = powerpcAMS
MODULE_FILES := $(notdir $(wildcard $(MODULES_DIR)/*.py))

# The location where python site libraries are installed is needed for
# the uninstall method.  It is found by calling distutils in python.
PYTHONLIBS := `python -c "from distutils.sysconfig import get_python_lib; print get_python_lib()"`
PYTHONLIBS_AMS := $(DESTDIR)/$(PYTHONLIBS)/$(MODULES_DIR)

PREFIX = @PREFIX@

INSTALL := `which install`
RM := `which rm`

all:
	@python setup.py build

install: all
	@$(INSTALL) -d -m 755 $(DESTDIR)$(PREFIX)/bin
	@$(INSTALL) -m 755 -t $(DESTDIR)$(PREFIX)/bin $(SCRIPTS)
	@python setup.py install --prefix=$(DESTDIR)$(PREFIX)

uninstall:
	@$(RM) -f $(DESTDIR)$(PREFIX)/$(SCRIPTS)
	@$(RM) -rf $(PYTHONLIBS_AMS)
	@$(RM) -f $(DESTDIR)/$(PYTHONLIBS)/$(MODULES_DIR)*.egg.info

clean:
	@echo "Cleaning up scripts/amsvis files..."
	@rm -Rf build

distclean:
	@echo "Cleaning up scripts/amsvis files..."
	@rm -Rf build $(IN_FILES)

maintainer-clean: distclean

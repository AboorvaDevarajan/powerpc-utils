powerpc-utils-1.2.23
=====================================================================
commit af84bc0c7647594083978ec31d619031c76f27b6
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Oct 20 10:08:41 2014 -0400

    drmgr: do not remove the last CPU
    
    The drmgr command should not attempt to remove the last cpu from the system.
    
    Normally this would not be an issue as cpu remove operations are initiated
    from the HMC and the HMC will not allow the last cpu to be removed. This
    issue does arise when handling PRRN events and trying to update the affinity
    on a partition that only has one cpu.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 0089e0c03a5cd9e7b039c7206e7d7c88c654f75d
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Oct 20 10:07:03 2014 -0400

    drmgr: Correct -s option handling
    
    The usage statement for drmgr claims that we can add/remove memory and cpus
    by drc name or drc index. The current code though assumes that any
    use of the -s flag to specify this defaults to drc name.
    
    This patch updates the option checking for memory and cpu operations to
    allow users to specify a drc index with the -s option. This will be
    handled the same way the -s option for pci devices is handled, assume it
    is a drc name unless it starts with '0x', indicating the string is
    really a hex value, and switching it to a drc index.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit abfa87aa4ece22f56fcadae13a0d9f080d5aef85
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Oct 20 10:05:32 2014 -0400

    drmgr: Correct null pointer usage
    
    We can't de-reference NULL pointers, it's not a nice thing to do.
    
    I found these during some debugging, correcting to avoid future bugs.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 294c77fa79f69b361b014356cf101a4518572f1b
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Oct 20 10:04:04 2014 -0400

    ofpathname: Fix checking for hbtl
    
    Fix checking for hbtl in of2l_scsi ().
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 493bfdda30b61be46d7d71e5e7bb05df9334ba81
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Oct 20 09:47:50 2014 -0400

    lsslot/drmgr: little endian support for memory
    
    This patch adds some support for memory slot listing
    and memory hotplugging on little endian systems.
    
    Signed-off-by: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>

commit 1df19388f82883bf6a457f8a9913991ec4cd5cea
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Oct 20 09:46:17 2014 -0400

    ofpathname: Convert OF format to logical device for virtio-scsi devices
    
    Add support to convert a Open Firmware device path to logical
    device path for virtio scsi device.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 70de5fdce708b9c339769ce4d58a27706788c7df
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Oct 20 09:44:05 2014 -0400

    ofpathname: Convert logical path to OF device path for virtio-scsi devices
    
    Add support to convert logical device path to Open firmware device path
    for virtio-scsi devices.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 95596ab7764f294d5755756ba097159774f5a7bb
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Oct 20 09:35:51 2014 -0400

    snap: Display message for Ubuntu platform
    
    snap is not supported on the Ubuntu platform hence display
    a suitable messsage. Ubuntu users can use log collection tool (apport-collec
    provided by distro.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
    Acked-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

powerpc-utils-1.2.22
=====================================================================
commit 0a67ffbb5d40c49347cd85a74921693457331f82
Author: Joel Stanley <joel@jms.id.au>
Date:   Wed Aug 13 09:38:20 2014 -0500

    ppc64_cpu: Be verbose about inconsistant SMT state
    
    With the use of splitcore, users are more likely to end up in a strange
    SMT state. Be kind and display what the online state of all our CPUs is,
    and explain how to get out of this hole.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit d3e016e9e5683a565824b9ec185901ff7feb25ed
Author: Joel Stanley <joel@jms.id.au>
Date:   Wed Aug 13 09:36:27 2014 -0500

    ppc64_cpu: Remove parameter from do_info
    
    It is unused.
    
    Also add a forward declaration at the top so we can call do_info in other
    interesting places.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 2af3d960442be3d36d8aa8ac914928d4047a0f18
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Wed Aug 13 08:39:17 2014 -0500

    nvram: Handle endianness in the nvram --unzip option.
    
    Handle endianness of the oops log size in the --unzip
    option.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
    Acked-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 48d45ca2ba2f098a4a565dac6e74cafe8db808f9
Author: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>
Date:   Wed Aug 13 08:35:30 2014 -0500

    drmgr/lsslot: increase number of max cpu threads.
    
    The Power8 cpu can support eight threads per cpu core.  This
    patch increases the maximum number of threads from four to eight.
    
    Signed-off-by: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>

commit 23872cbdce2107562b1b997cf306d6279ddf5d50
Author: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>
Date:   Wed Aug 13 08:22:37 2014 -0500

    lsslot/drmgr: little endian support for memory
    
    This patch adds some support in retrieving memory slot information
    on little endian systems.  These changes have only been tested using
    lsslot.  Adding or removing memory via drmgr has not been attempted.
    
    Signed-off-by: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit c0e6665d9da9797df4b7516f2ef14d7a45f5cb81
Author: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>
Date:   Wed Aug 13 08:00:52 2014 -0500

    lsslot/drmgr: little endian support for cpu
    
    This patch adds some support in retrieving cpu slot information
    on little endian systems.  These changes have only been tested using
    lsslot.  Adding or removing cpu's via drmgr has not been attempted.
    
    Signed-off-by: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>

powerpc-utils-1.2.21
=====================================================================
commit a529515e6a78bc8d39b58122b99e009291048a78
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Wed Jun 25 16:11:37 2014 -0500

    uesensor: remove unused platform variable
    
    Remove the unused platform variable that appears to be
    an accidental leftover from updating the platform checking
    code.
    
    This was producing a build warning.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit d840b6a2e4d7ee38b08b15c80c562e699f1f7b79
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Wed Jun 25 16:06:17 2014 -0500

    nvram: restrict --nvram-size to 16 byte multiples
    
    PAPR defines a 16 byte block size for nvram partitions. This patch restricts
    the --nvram-size option to sizes that are multiples of 16.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 38f6cab58bd77d75d8bcf52c2b3a4b06002601eb
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Wed Jun 25 16:01:41 2014 -0500

    nvram: fix memory corruption when nvram->nbytes is less than actual nvram si
ze
    
    The nvram_read function always calls read with a 512 byte chunk size. If the
    actual nvram size is greater than nvram->nbytes, which can be overriden by t
he
    --nvram-size option, the allocated read buffer will be overrun.
    
    Fixed read logic to only read upto nvram->nbytes of data.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit ba2c2ad835339f52be8972a3207012ae54749113
Author: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>
Date:   Wed Jun 25 15:58:24 2014 -0500

    set_power_on: handle endianess reading max latency
    
    set_power_on reads device-tree to get the max latency value,
    which is in a big endian format.  This needs to be converted
    for little endian architectures.
    
    Signed-off-by: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>

commit 562526a14c3121e695ef782dc028c82e6e350bbf
Author: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>
Date:   Wed Jun 25 15:31:54 2014 -0500

    ppc64_cpu: handle endianess in rtas sysparm buffer
    
    ppc64_cpu passes a buffer to rtas_set_sysparm.  The first two
    bytes of this buffer must encode a integer denoting the
    size of the remaining the buffer. This integer must be in a
    big endian format.
    
    Signed-off-by: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>

commit 7e781be45fbf87ccd1792a498788b9aaf3256b72
Author: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>
Date:   Wed Jun 25 15:22:51 2014 -0500

    uesensor: fix endian issues reading device-tree
    
    The values in /proc/device-tree/rtas/rtas-sensors are
    big endian so this needs to be handled for little endian
    architectures.
    
    Signed-off-by: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>

commit 9bfe5991bf5d8e1c047f45a664b636fa05dca39f
Author: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>
Date:   Wed Jun 25 15:18:55 2014 -0500

    serv_config: handle endianess in sysparm buffer
    
    rtas_get_sysparm and rtas_set_sysparm commands both
    manipulate buffers in which the first two bytes are a big
    endian integer indicating the size of the remaining buffer.
    This patch makes sure those bytes are in the correct format.
    
    Signed-off-by: Thomas Falcon <tlfalcon@linux.vnet.ibm.com>

commit a9f264ab1f84c20f144cba9c971883064e5430dd
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Wed Jun 25 15:16:31 2014 -0500

    lsslot: fix segfault when lmb_list->lmbs is NULL
    
    PowerKVM guests currently do not support dynamically reconfigurable
    memory, and as such get_lmbs will return a lmb_list struct whose lmbs
    field is NULL. Added a NULL check to avoid segfault for the case where
    no LMB drc-names  are defined in device tree.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit d9f6fbcea7feeedf5d72ddddef33295cbbe6d622
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Jun 9 06:44:58 2014 -0500

    ppc64_cpu: update access validation routines
    
    The use of fopen() to check for read/write access of system attribute
    files (i.e. sysfs) no longer works with kernels 3.14 and later. The man
    page for fopen() states that there is an implied file creation if the
    file does not exist. This now causes fopen() to return EACCES instead
    of ENOENT for files that do not exist.
    
    This patch updates ppc64_cpu to use access() to validate file existence
    and file read/write permissions.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>
    Reviewed-by: Joel Stanley <joel@jms.id.au>
    Acked-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 38005d9cc59a5f81754b93b1479f8538c7151976
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Mon Jun 9 06:42:42 2014 -0500

    update_flash: Fix typo in man page
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit cc4589f43ae5ca2fffd9b96997ba09023f9e8999
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Mon Jun 9 06:39:26 2014 -0500

    update_flash_nv: Display current FW version
    
    Add support to display current firmware version detail
    on PowerKVM host.
    
    Sample output:
    [root@abc123 tmp]# update_flash -d
    Current firwmare version :
      T side    : FW770.20 (ZL770_060)
      P side    : FW770.20 (ZL770_060)
      Boot side : FW770.20 (ZL770_060)
    
    Suggested-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 2dfd19700a0dbe8df0c0cfc2b6c23ef42dbb6c11
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Mon Jun 9 06:37:41 2014 -0500

    snap: Fix typo in output display
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com

commit 507d3ba46376f96094093bf8dbff0cbc7d158390
Author: Anton Blanchard <anton@samba.org>
Date:   Fri Apr 25 08:24:24 2014 -0500

    update_flash: Remove some bashisms
    
    == is a bashism. Replace it with =.
    
    We also need to add quotes around some variables to avoid:
    
        local: FW710.00: bad variable name
    
    Signed-off-by: Anton Blanchard <anton@samba.org>
    Reviewed-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit de159805368210c17d01bfe088c157d394406640
Author: Joel Stanley <joel@jms.id.au>
Date:   Fri Apr 25 08:22:32 2014 -0500

    ppc64_cpu: Let kernel validate subcore options
    
    Previously we checked for valid subcore-per-core options, however, the
    kernel knows better than we do as to what is valid. Remove the check.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 6f11925411d334eb501cc2214e08d4eb596438cd
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Fri Apr 25 08:21:03 2014 -0500

    ofpathname: Convert OF path to logical names for usb devices
    
    Add support to convert a Open Firmware device path to logical
    device path for usb device.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 655649226d2b60eff1a1ef85f92a3ef5cd1b360b
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Fri Apr 25 08:20:09 2014 -0500

    ofpathname: Convert logical device path to OF format for usb devices
    
    Add support to convert logical device path to Open firmware
    device path for usb devices.
    
    Reported-by: Nikunj A Dadhania <nikunj@linux.vnet.ibm.com>
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 852e69a9a099273a3e49ebdfcc2afd13a8e9876e
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Fri Apr 25 08:18:26 2014 -0500

    drmgr: Update action option validation
    
    The drmgr command does not do any validation of the action option
    specified on the command line, except for some checking for CPU
    operations.. The omission of an action option can lead to confusing
    error messages or just exiting with an error.
    
    This patch updates each connector type with a validation check for
    their respective valid action options.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 865171adc9d0f2a327ac892e99bf60add5255315
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Fri Apr 25 08:08:06 2014 -0500

    Updating .gitignore fo files that are no longer in git.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit a13ddf3a0bda581984f77c1ca171b34ae90ef83a
Author: Shivaprasad G Bhat <sbhat@linux.vnet.ibm.com>
Date:   Fri Apr 25 07:59:51 2014 -0500

    ppc64_cpu: Add option --threads-per-core
    
    The threads per core calculated in ppc64_cpu is more relaiable than the
    same provided by any other utility. Expose the value through an option.
    
    Signed-off-by: Shivaprasad G Bhat <sbhat@linux.vnet.ibm.com>

commit 6e5dfe8302966568e4e7eff6035d7cc5d46481f9
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Fri Apr 25 07:49:19 2014 -0500

    Move librtas error code to common directory.
    
    Now that we have a src/common directory this patch moves the
    librtas_error files to the common directory.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit e07b773c38effae0c9c16ddc20c423a166638194
Author: Stewart Smith <stewart@linux.vnet.ibm.com>
Date:   Tue Apr 8 15:13:39 2014 -0500

    recursive make considered harmful
    
    Instead, we can use include/ for makefiles, or because we're a small
    project, just put it in one makefile of ~150 lines.
    
    We also fix up the spec file version substitution to use autofoo.
    
    With these fixes, make distcheck works correctly.
    
    Signed-off-by: Stewart Smith <stewart@linux.vnet.ibm.com>

commit f8b52ffb07006897e2b9df281f6aea83a5667c03
Author: Stewart Smith <stewart@linux.vnet.ibm.com>
Date:   Tue Apr 8 15:07:38 2014 -0500

    add sys/time.h and gettimeofday detection to configure.ac courtesy autoscan
    
    Signed-off-by: Stewart Smith <stewart@linux.vnet.ibm.com>

commit 475e60537c7f872ae44f89e72100d382986e1636
Author: Stewart Smith <stewart@linux.vnet.ibm.com>
Date:   Tue Apr 8 15:04:34 2014 -0500

    check for and use gcc hardening flags if available
    
    Signed-off-by: Stewart Smith <stewart@linux.vnet.ibm.com>

commit 63d6bcc2d79814fb625089b4f01d4fdba703ea03
Author: Stewart Smith <stewart@linux.vnet.ibm.com>
Date:   Tue Apr 8 15:00:48 2014 -0500

    remove autogenerated files
    
    files such as Makefile.in and configure should not be checked into
    source repositories as they'll be regenerated on build.
    
    Add a autogen.sh script to run autoreconf
    
    Signed-off-by: Stewart Smith <stewart@linux.vnet.ibm.com>

commit 66c23d7323ba26757bd1a6b50b3db6c81c422822
Author: Stewart Smith <stewart@linux.vnet.ibm.com>
Date:   Tue Apr 8 14:44:32 2014 -0500

    Move subdir-objects options to configure.ac rather than Makefile.am(s)
    
    Easier to keep it in one place than several
    
    Signed-off-by: Stewart Smith <stewart@linux.vnet.ibm.com>

powerpc-utils-1.2.20
=====================================================================
commit 73c454bea39418872313cd960d005d4d20262f20
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Fri Mar 21 09:23:51 2014 -0500

    powepcutils: Fix platform dependency
    
    Network interfaces can have prefix other than eth. Look for
    all the interfaces in /sys/class/net.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>
    Reviewed-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 3bf75d1fe9f1fbc24c34287b2fc50aae841ca2ca
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Fri Mar 21 09:16:08 2014 -0500

    ofpathname: Convert OF format to logical device for ethernet devices
    
    Network interfaces can have prefix other than eth. Look for
    all the interfaces in /sys/class/net.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 1e45fb89513b4f474308ac1684c378e67198a55f
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Fri Mar 21 09:14:46 2014 -0500

    ofpathname: Convert logical path to OF device path for ethernet devices
    
    Network interface need not have name starting with eth. Check if
    the device is a network interface and convert the logical
    name to OF path.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit ae566f77c7a176079ef868f52d5873096aa98655
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Fri Mar 21 09:13:10 2014 -0500

    ofpathname: Convert OF format to logical device for virtual devices
    
    Add support to convert a Open Firmware device path to logical
    device path for virtio block device.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
    Acked-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit a2f49f551bb34023ab1052f92f8c06541e6f3474
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Fri Mar 21 09:10:38 2014 -0500

    snap: Fix misplaced if block
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
    Acked-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 7802242d9cadb475bbbae323c34bd177930dd52d
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Fri Mar 21 09:08:19 2014 -0500

    ofpathname: Enable non-pseries platforms
    
    There are some non-pseries platforms that can (and do) use
    the ofpathname script. This patch updates pseries_platform
    check in ofpathname to allow for unknown platforms.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>
    Reviewed-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 74620d997eda9a8977a8132e06f30da3d46467c7
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri Mar 21 09:06:21 2014 -0500

    ofpathname: Convert virtio block device to OF device path
    
    Add the ability to convert a logical device path for
    a virtio block device to its Open Firmware device path.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit d3f442a8b3ac776395d03eb396a2bfc0ea95f0ba
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Wed Mar 12 09:20:54 2014 -0500

    automake: Add subdir-objects automake option
    
    Current git builds fail for me, with:
    
      configure.ac:13: installing 'build-aux/compile'
      automake: warnings are treated as errors
      src/Makefile.am:8: warning: source file 'common/pseries_platform.c' is in 
a subdirectory,
      src/Makefile.am:8: but option 'subdir-objects' is disabled
      automake: warning: possible forward-incompatibility.
      automake: At least a source file is in a subdirectory, but the 'subdir-obj
ects'
      automake: automake option hasn't been enabled.  For now, the corresponding
 output
      automake: object file(s) will be placed in the top-level directory.  Howev
er,
      automake: this behaviour will change in future Automake versions: they wil
l
      automake: unconditionally cause object files to be placed in the same subd
irectory
      automake: of the corresponding sources.
      automake: You are advised to start using 'subdir-objects' option throughou
t your
      automake: project, to avoid future incompatibilities.
      src/drmgr/Makefile.am:9: warning: source file '$(COM_DIR)/pseries_platform
.c' is in a subdirectory,
      src/drmgr/Makefile.am:9: but option 'subdir-objects' is disabled
      autoreconf: automake failed with exit status: 1
    
    Using:
    
    automake (GNU automake) 1.14.1
    
    Since we're using objects in subdirectories, we need the subdir-objects
    atuomake option.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>
    
    This commit also contains the updates from running autoreconf with this patc
h.

commit 8283cf470d0de18549443202c9fbabc742aa1975
Author: Greg Kurz <gkurz@linux.vnet.ibm.com>
Date:   Wed Mar 12 09:11:49 2014 -0500

    drmgr: endian fixes for ibm,configure-connector
    
    The ibm,configure-connector RTAS call is supposed to be called several
    times to do its job. It needs a work area to hold data between
    subsequent calls. Among these data, there are integer values that
    must be in big endian order when passed to RTAS.
    
    A buffer is setup by drmgr and passed to the rtas_cfg_connector() call
    in librtas for this purpose. The rtas_cfg_connector() call manipulates
    the work area as simple pointer to a char buffer and makes no assumptions
    about its content. It is hence not convenient to ask librtas to fix the
    endianness of the work area.
    
    Since the work area is entirely exposed in the drmgr code, it is far
    easier and straightforward to handle endianess there. This patch
    enforce the work area to be big endian, always, and drmgr to byteswap
    when needed.
    
    Signed-off-by: Greg Kurz <gkurz@linux.vnet.ibm.com>

commit 360eaf780748eb820ad97992db49f16962cbabf9
Author: Joel Stanley <joel@jms.id.au>
Date:   Wed Mar 12 08:43:48 2014 -0500

    ppc64_cpu: bump internal version
    
    Bump the internal version so users know that have fixed subcore support.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 4a2451399e3719d520f052d5180c72b2844ed902
Author: Brian King <brking@linux.vnet.ibm.com>
Date:   Wed Mar 12 08:40:44 2014 -0500

    ofpathname: Fix OF to logical VFC lookup for non zero LUNs
    
    This patch fixes OF path to logical device name translation
    for VFC devices with a non zero LUN when it has leading zeroes.
    
    Signed-off-by: Brian King <brking@linux.vnet.ibm.com>

commit 2f6c718ac7fdfa9757a8e446199d57f2648ac8e7
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Wed Mar 12 08:38:34 2014 -0500

    snap: Fix call traces seen while capturing lparcfg and rtas files
    
    As the lparcfg and rtas procfs files are not populated properly by the
    kernel on the PowerKVM guest do not capture it.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 05b14ae4cd87642c08a72c3c0a8bc2bb6a1b8d0b
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Wed Mar 12 08:16:45 2014 -0500

    lsslot: Correct the return code when no DR slots found
    
    The lsslot command exits with a return code of 1 when there
    are not any DR slots found. We should not consider it an error
    that no DR capable slots are found.
    
    This patch updates lsslot to exit with zero if no DR capable
    slots are found.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 500763c1058664b147523e68f4e046ecd5fa572c
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Wed Mar 12 08:13:38 2014 -0500

    drmgr: Correct parsing of -s option
    
    The -s option can be used to specify a drc name or a drc index in
    some cases. We need to leave the parsing of this value to the
    individual commands in drmgr instead of always assuming that
    strings starting with "0x" should be parsed into ints.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

powerpc-utils-1.2.19
=====================================================================

commit 08fd1d73a0cb66ff9db5cc29c7f3d19182c1c5a0
Author: Greg Kurz <gkurz@linux.vnet.ibm.com>
Date:   Mon Mar 3 13:00:10 2014 -0600

    drmgr: data comming from OF is big endian
    
    The chunk in get_of_list_prop() fixes the following:
    
    Allocation failure (8f00000000) at get_drc_info:240
    
    We also introduce the get_ofdt_int_property() helper to factor the many
    places where byteswap is needed in the PCI code.
    
    Signed-off-by: Greg Kurz <gkurz@linux.vnet.ibm.com>

commit 734983c5d40760848eee51d5b0915a1929416126
Author: Greg Kurz <gkurz@linux.vnet.ibm.com>
Date:   Mon Mar 3 12:57:49 2014 -0600

    lsprop, nvram: use standard macros from <endian.h>
    
    Signed-off-by: Greg Kurz <gkurz@linux.vnet.ibm.com>

commit 0af3468456d06f5e64fee36f80df605e4f3d15b8
Author: Greg Kurz <gkurz@linux.vnet.ibm.com>
Date:   Fri Feb 28 12:53:45 2014 -0600

    drmgr: fix wrong check of valid_platform() return value
    
    Signed-off-by: Greg Kurz <gkurz@linux.vnet.ibm.com>

commit 425fef8cfca8b8cd57b78aaecbba8cf2fb647cb1
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri Feb 28 12:51:25 2014 -0600

    update_flash: Add update access key link
    
    Add link to get new access key.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 62ac13a21a3f61e6974fd8df5a273635e691f7a6
Author: Joel Stanley <joel@jms.id.au>
Date:   Fri Feb 28 12:49:53 2014 -0600

    ppc64_cpu: use write(2) when modifying sysfs
    
    This improves the error handling when setting attributes fails. fprintf
    does not return an error when a sysfs write returns an error.  Using the
    write(2), we can catch bad return codes and inform the user.
    
    The callers of set_attribute have been updated to ignore errors where
    they are expected.
    
    This fixes the following bug:
    
     Modifying --subcores-per-core when a guest is running is not allowed.
     sysfs reports -EBUSY but currently ppc64_cpu reports success, despite
     not doing anything.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 5a79c9af7001a0dccbe9793296eb2155eb6c6232
Author: Joel Stanley <joel@jms.id.au>
Date:   Fri Feb 28 12:48:25 2014 -0600

    ppc64_cpu: handle offline cpus when setting attributes
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 95764cc11adf843de0486045c444011a0ee01a27
Author: Joel Stanley <joel@jms.id.au>
Date:   Fri Feb 28 12:47:22 2014 -0600

    ppc64_cpu: work around bad sysfs online behaviour
    
    The sysfs file /sys/devices/system/cpu/cpuXX/online will return EINVAL
    if set to 1 when already online, or 0 when already offline. This is not
    a fatal error: it is normal behaviour when setting the smt mode.
    
    As we are stuck with the sysfs interface, work around it by looking at
    errno after setting the CPU state, and ignoring the failure if errno is
    set to EINVAL.
    
    While we are here, merge the two for loops into one to avoid duplicating
    the error checking code.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit fdc3e894f5ef619175f16b0d0813fdd996c545a3
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Fri Feb 28 12:45:25 2014 -0600

    pseries_platform: Convert the helper script from bash to dash
    
    As some of the scripts (for ex: update flash) can run in dash this
    script cannot be invoked. Make the string comparison follow POSIX syntax.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 84cce814fbcd61bbf86da19c4697ec3759208f8f
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Fri Feb 28 12:43:18 2014 -0600

    scripts/update_flash: Use reboot instead of shutdown
    
    We may not have a shutdown binary on lightweight systems. However,
    reboot is much more likely.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>

commit 20124e108e76e7e9846294101190e87ad4a7f358
Author: Madhavan Srinivasan <maddy@linux.vnet.ibm.com>
Date:   Fri Feb 28 12:40:46 2014 -0600

    lparstat: handle unsupported files
    
    Add code to check the return value of fopen before
    reading in to it. Incase of guest, some rtas files
    does not exist. This causes a segv.
    
    Signed-off-by: Madhavan Srinivasan <maddy@linux.vnet.ibm.com>

commit 18d15de5455eedfd4bb7ad81a69b4b7173cc909a
Author: Madhavan Srinivasan <maddy@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:58:46 2014 -0600

    lparstat: fix a segv in parse_proc_stat
    
    Signed-off-by: Madhavan Srinivasan <maddy@linux.vnet.ibm.com>

commit 4f542616dbd80ece536f5f23190d937b4e73dfd9
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:51:30 2014 -0600

    drmgr: workaround for qemu virtio hotplug devices
    
    QEMU wants to hotplug slots on a single bus. The Power rpaphp module is broken
    and only plays nicely when slots are on their own bus. Workaround this limitation
    by using the /sys/bus/pci/rescan interface to discover new devices. The device
    /sys/devices/pci[busid]/[bus:slot:fn]/remove sysfs entry is used to remove the
    device. A new "-V" option is introduced to identify that this workaround for
    pci virtio devices is to be used.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit cfe38bd0994e4ea06d514eaee02325faa0c3369a
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:50:14 2014 -0600

    drmgr: lookup drc_name when drc_index is supplied for pci hotplug
    
    The -s option should accept a drc_name or drc_index. However, currently
    passing a drc_index fails because the code always assumes a drc_name.
    Added a find_drc_name function that takes a drc_index and returns the
    associated drc_name.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit 2bfe73145d397d84b533250784c730e5d14f243d
Author: Joel Stanley <joel@jms.id.au>
Date:   Mon Feb 24 11:47:12 2014 -0600

    ppc64_cpu: Check {get,set}_attribute return values
    
    Take a look at the return value of the fprintf/scanf, and propagate
    the return code. This removes a compiler warning.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit bbb1493170b10c017cf6e236b25432d5e1a8466b
Author: Joel Stanley <joel@jms.id.au>
Date:   Mon Feb 24 11:46:31 2014 -0600

    ppc64_cpu: Add --info command
    
    This lists all threads on the system, grouped by the cores they belong
    to. The online status of a thread is indicated by an asterisk.
    
      $ ppc64_cpu --info
      Core   0:    0*    1*    2*    3*    4*    5*    6*    7*
      Core   1:    8*    9*   10*   11*   12*   13*   14*   15*
      Core   2:   16*   17*   18*   19*   20*   21*   22*   23*
      Core   3:   24*   25*   26*   27*   28*   29*   30*   31*
    
    If a system supports subcores, and the user has permission to access the
    sysfs files that indicate the subcore status, the threads will be
    grouped by subcore.
    
      $ ppc64_cpu --info
      Core   0:
        Subcore   0:    0*    1
        Subcore   1:    2     3
        Subcore   2:    4     5
        Subcore   3:    6     7
      Core   1:
        Subcore   4:    8*    9
        Subcore   5:   10    11
        Subcore   6:   12    13
        Subcore   7:   14    15
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 5aab6796437ff766c4633edc7c9616448a9f68d4
Author: Joel Stanley <joel@jms.id.au>
Date:   Mon Feb 24 11:45:52 2014 -0600

    ppc64_cpu: Core state should depend on all threads
    
    A core should be considered running when any thread is online.  The
    previous test only looked at the first thread on a core, now we loop
    through all cores in the core in question.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 728ec6de660b3dc1fc88e993691f921e3c6b5f87
Author: Joel Stanley <joel@jms.id.au>
Date:   Mon Feb 24 11:40:46 2014 -0600

    ppc64_cpu: Teach all options about subcores
    
    Commands such as --smt=on/off need to know about subcores so they can
    online the required threads when a core is in split core mode.
    
    Instead of re-implementing commands so that subcores are treated
    correctly, make the entire program treat subcores as cores. This means
    that commands such as --cores-on report the number of subcores, not
    physical cores.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit e1bf03ec85443ed8d6fd51bf31729f6db89f4960
Author: Joel Stanley <joel@jms.id.au>
Date:   Mon Feb 24 11:40:05 2014 -0600

    ppc64_cpu: Add --subcores-per-core option
    
    Upcoming power8 chips support a concept called split core. This is where
    the core can be split into subcores that although not full cores, are
    able to appear as full cores to a guest.
    
    Currently the kernel supports setting subcores per core to 1 or 4,
    through a sysfs interface.
    
    This command allows the split state to be queried, and set to 1 or 4.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 3b343e0eba660da74362bfde3461812d674fa89d
Author: Joel Stanley <joel@jms.id.au>
Date:   Mon Feb 24 11:39:22 2014 -0600

    ppc64_cpu: test_attr return 2 when file missing
    
    The old logic was to assume the attribute is readable when the sysfs
    file does not exist. This makes it hard to detect when subcores are
    available.
    
    However, the existing code relies on not returning an error when
    iterating through the CPUs in sysfs. Compromise by returning 2, which
    doesn't break existing code, and allows new users to ask precisely what
    the state of the attribute is.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 2ec5413a7256a4bdeaec2ed825353347df2f1c56
Author: Joel Stanley <joel@jms.id.au>
Date:   Mon Feb 24 11:38:21 2014 -0600

    ppc64_cpu: make internal functions static
    
    A cleanup before making future changes; make all the internal
    functions (in this case, everything except main) and global variables
    static.
    
    Signed-off-by: Joel Stanley <joel@jms.id.au>

commit 190bc260f91775ee3750cd213f7e505008bff676
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:34:35 2014 -0600

    drmgr: Handle platform dependencies
    
    Supported platforms: PowerVm guest, BE guest
    Unsupported platforms: PowerNV
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 85f0eda1db3dcec957d313e46d64eb9fc6528277
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:33:20 2014 -0600

    Handle Platform dependencies for PowerVM guests
    
    Supported platforms: PowerVM guest, BE guest
    Unsupported platforms: PowerNV
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 75aecae8c532d0c12f1540886c2c72463c51e72b
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:31:59 2014 -0600

    Handle Platform dependenciesfor VM & BE guests
    
    Supported platforms: PowerVM guest, BE guest
    Unsupported platforms: PowerNV
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 9abbf45c163dc7ba5e3c9147339dbee3e0fbb6fc
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:30:16 2014 -0600

    pseries_platform: Handle platform dependencies
    
    The patch will take care of identifying the platform and provides
    a common function call (get_platform) which can be exported by
    various other tools of powerpc-utils and display suitable result.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
    Signed-off-by: Suzuki K. Poulose <suzuki@in.ibm.com>

commit 41c0de6844b760bf9946ec350384e91cac8ac80e
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:28:46 2014 -0600

    powerpc-utils/update_flash: Handle platform dependency
    
    Supported platform: PowerNV, PowerVM guest
    Unsupported platform: BE guest
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 12a7d1655864b51c7247302290ca00ba67728511
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:27:47 2014 -0600

    powerpc-utils: pseries_platform tools supported on Pseries Lpar and guest
    
    Supported platform: PowerVM guest, BE guest
    Unsupported platform: PowerNV
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 6314289313d8c13a2b44e4d6324e34bb09e9e155
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:26:30 2014 -0600

    powerpc-utils: pseries_platform for Tools supported on Pseries Lpar
    
    Supported platform: PowerVM guest
    unsupported platform: PowerNV, BE guest
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 39aaaca59b08e2c91b71070a1fad91eb184121c6
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Mon Feb 24 11:25:24 2014 -0600

    powerpc-utils: Handle platform dependencies
    
    The patch will take care of identifying the platform and provides
    a common script which can be called by various other tools of
    powerpc-utils and display suitable result.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit fdd92e0c5654fbc5eba06c9277d3acb7f37ec257
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Wed Feb 12 08:08:21 2014 -0600

    sys_ident: Add support to recognize Power 8 systems.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 727785cf6f533d2408c65dc51b797cc04fac4b23
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Feb 10 09:50:51 2014 -0600

    The drmgr command incorrectly returns -1 when passed the --capabilities option.
    This patch corrects drmgr to properly return zero when passed the
    --capabilities flag.
    
    The fix for this involves getting rid of parse_and_validate_options()
    so that we can handle cases where we just want to display the capabilites
    or usage messages properly.
    
    This issue was introduced by this commit:
    http://sourceforge.net/p/powerpc-utils/powerpc-utils/ci/b2fb611e87ebdb27a6b923cf1ac076eb364870b8
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 117f06d82f26fb685b45241c159179233dc7e38b
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Feb 10 09:47:57 2014 -0600

    Initialize the 'state' variable to get rid of a compiler warning.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 79879121c3a82063303319625d8a3c33222ec14e
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Feb 10 09:47:07 2014 -0600

    Remove useless instances of setting rc variable.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 8f859d2aa63c99ae52b5ef22833deb4005c6d825
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Feb 10 09:46:20 2014 -0600

    We can have device tree nodes that do not have any drc information in them.
    This patch checks for this condition and handles it appropriately.
    
    Without this fix we get an allocation failure when trying to get the
    size of a file that does not exist.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 20619e18339c5c15c1e88e031ffb38be5038ee3a
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Feb 10 09:45:29 2014 -0600

    This provides updates to drmgr's zalloc() routine to provide
    additional debug information in the case of allocation failures.
    The patch also gets rid of the report_alloc_error() routine
    that does not really provide any information.
    
    The zalloc() routine is moved from being a static inline in dr.h to
    an actual function in common.c with a #define front-end in dr.h
    to grab function and line number.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit a52e903c5ae7fc142502585a4c832979673441e4
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Feb 10 09:44:37 2014 -0600

    This patch cleans up the naming of the routines/variables used
    when writing to the kernel files (via sysfs) that are used in
    adding or removing a slot. This is just to (hopefully) make
    reading the code easier, there are no functional changes.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 6251ae1f558636f9c89f8183fa0b8ba7086a1f6c
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Mon Feb 10 09:43:03 2014 -0600

    When trying to remove a slot by writing to the sysfs interface
    we need to make sure we wait until the add/remove completes. The
    write to this file will return EBUSY while the kernel is waiting
    for the kernel to complete the work on the slot.
    
    This patch updates the write to the kernel interface file to loop
    on EBUSY while waiting for the operation to complete.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 494bb8a1c99b058c165c5fecd7c8544cb19728e6
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Mon Feb 10 09:41:51 2014 -0600

    The ibm,update-nodes rtas call returns an operation list whose first 4 bytes
    are composed of a 1-byte opcode and 3-bytes denoting the number of operands
    in the list. For the add nodes case each operand is actually composed of a
    phandle/drc-index pair. The current code increments the count while processing
    the list for each value instead of each value pair resulting in only half the
    returned nodes being added.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit b26714e71cdabb8959c9a4f28176621a9b4f34d5
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Mon Feb 10 09:40:39 2014 -0600

    By testing the hibernate and migrate sysfs attributes drmgr can determine if a
    device tree update is required. If the update is done by the kernel reading
    the attribute file will return 1. Otherwise, it should either return 0 or be
    unreadable to indicate drmgr needs to update the device tree from userspace.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit aeb32757cab7b70ad67c20b7b1ebd4886fc707f4
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Tue Jan 14 19:57:32 2014 -0600

    Presently update_flash_nv is not executable. So if we try to
    execute this script we hit "Permission denied" error. This
    patch makes update_flash_nv as executable.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 776e6359a6141fd943755c3958e012a677021f2a
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Tue Jan 14 19:56:05 2014 -0600

    Fix oops_log_info header in the oops record to ensure the header
    size is same across all processors.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 99ca9bb86e370f630c25da46a95d540de11e6580
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Tue Jan 14 19:54:25 2014 -0600

    Add -h flag to update_flash and update_flash_nv tool.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit dce5813f5ed7c38c7297f8d967a903abc3184853
Author: Paul Mackerras <paulus@samba.org>
Date:   Tue Jan 14 19:53:58 2014 -0600

    From: Paul Mackerras <paulus@samba.og>
    
    Add the ability to convert a logical device path for
    a virtio block device to its Open Firmware device path.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 0f1e70a274bbad5b08221dace596d016d77a12e9
Author: Bharani C.V <bharanve@linux.vnet.ibm.com>
Date:   Mon Dec 2 14:01:44 2013 -0600

    snap command uses open call to open the input file and
    then uses sysread call to copy content from soure file
    to destination. Command hangs if input file is blocked.
    This patch uses sysopen with NONBLOCK flag instead of
    regular open call so that we don't hang.
    
    Signed-off-by: Bharani C.V. <bharanve@linux.vnet.ibm.com>
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 55dc0d27a1402b0dda8d982f9539681b9d8cc040
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Mon Dec 2 13:03:44 2013 -0600

    Man page update for PowerNV platform.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 0646c2365d4a67b741d76da037d103869bbe3380
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri Nov 22 12:40:17 2013 -0600

    Update Makefile and spec file to pickup update_flash_nv tool.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit aafc3ec5972c4263da3c0e421fffa53723925b96
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri Nov 22 12:39:27 2013 -0600

    This patch checks for running paltform and if system is in PowerNV
    mode it calls update_flash_nv tool.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 5bacd664873bc84143a8ace6db745d7361a2b192
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri Nov 22 11:42:38 2013 -0600

    This patch adds support for PowerNV platform.
    
    Code update procedure in both pSeries and PowerNV platform is same.
    But return codes and interface to pass image to kernel differs. Also
    in PowerNV by default inband code update is allowed. Hence I have
    introduced new file (update_flash_nv) rather than updating existing
    update_flash command.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit bbffa245e281626d6e3a9c689dc843bead7e2188
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri Nov 22 11:15:09 2013 -0600

    The function keyword is a bashism and it will not be recognized by
    other POSIX complaint shell. POSIX syntax does not use function and
    mandates the use of parenthesis. Hence change all function definations
    in update_flash tool to follow POSIX standard.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 5e5f13fc0998e010b366f8d122ad90e07d948ae0
Author: Cedric Le Goater <clg@fr.ibm.com>
Date:   Thu Nov 21 14:07:04 2013 -0600

    From: Cedric Le Goater <clg@fr.ibm.com>
    
    The nvram is in big endian order. The partition length needs to be
    byte-swapped when it is read or written on little endian machines.
    
    Signed-off-by: Cedric Le Goater <clg@fr.ibm.com>

commit 1e33a4f25f6b6d384b019c065eb1919e768eb876
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Thu Nov 21 14:01:49 2013 -0600

    f we're only interested in building the OF tools (nvram, lsprop, etc),
    then requiring librtas is a little unnecessary.
    
    This change adds --without-librtas to allow building without librtas
    present.
    
    Requires an autoreconf.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>
    
    Since this required an autoreconf I am including the diffstat from the
    original patch to hopefully make picking out the code changes (and
    not updates to to sutoreconf) easier.
    
     configure.ac          |   19 ++++++++++++++++++-
     src/Makefile.am       |   15 +++++++++------
     src/drmgr/Makefile.am |    2 ++
     3 files changed, 29 insertions(+), 7 deletions(-)

commit db5449adfea023c54b5f5f339cde6be6cdbb97b0
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Wed Nov 20 10:03:02 2013 -0600

    On a ppc64 f18 machine, I see the following error during make install:
    
     make[3]: Entering directory `powerpc-utils/scripts'
     make[3]: Nothing to be done for `install-data-am'.
      /usr/bin/mkdir -p '/usr/bin'
      /usr/bin/mkdir -p '/usr/bin'
      /usr/bin/mkdir -p '/usr/sbin'
      /usr/bin/mkdir -p '/usr/sbin'
      /usr/bin/install -c amsstat '/usr/bin'
      /usr/bin/install -c amsstat '/usr/bin'
      /usr/bin/install -c update_flash hvcsadmin rtas_dump snap bootlist ofpathname lsdevinfo ls-veth ls-vscsi ls-vdev '/usr/sbin'
     /usr/bin/install: cannot create regular file ‘/usr/bin/amsstat’: File exists
     make[3]: *** [install-dist_binSCRIPTS] Error 1
    
    We seem to have duplicate install rules due to the separate dist_ rules
    in scripts/Makefile.am.
    
    Since the dist_*_SCRIPTS rule also implies *_SCRIPTS, we can remove the
    non-dist_ versions.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>
    Reviewed-by: <hegdevasant@linux.vnet.ibm.com>

commit 87c7651947143e8697ccf669307b577415359007
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Wed Nov 20 10:01:41 2013 -0600

    Update FW entitlement message to reflect IBM preferred wordings.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

powerpc-utils-1.2.18
=====================================================================
commit 1cb9a27a8751ee0f0d5d54de2e9b3e086618fc82
Author: Philip Kelleher <pjk1939@linux.vnet.ibm.com>
Date:   Tue Sep 10 11:15:52 2013 -0500

    From: Philip Kelleher <pjk1939@linux.vnet.ibm.com>
    
    Added support for IBM Flash Adapter devices within the
    snap script.
    
    The script will check whether or not IBM Flash
    Adapters are currently loaded in the system. If so, the
    script will check them. If not, the script will do its
    normal operations.
    
    It will, then, check whether or not the rsxx-utils are
    installed on the system. If they are installed, the rs_cardreport
    application will be ran. If not, the script will print out
    a warning stating that IBM Flash Adapter information could
    not be gathered. The script will continue normally either
    way.
    
    Signed-off-by: Philip J Kelleher <pjk1939@linux.vnet.ibm.com>

commit 07165e5854b928d007ea2af1542a64c8d07c1336
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Sep 10 11:13:49 2013 -0500

    Allow frequency sampling for given time periods.
    
    This patch adds an option [-t <time> ] for the --frequency action in
    ppc64_cpu so that users can specify the period in seconds over which
    they want to do frequency sampling.
    
    Signed-off-by:Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit b2fb611e87ebdb27a6b923cf1ac076eb364870b8
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Sep 10 11:12:19 2013 -0500

    Acquire the dr_lock earlier in dr operations.
    
    The dr_lock used to serialize dr operations should be taken earlier.
    The current code takes the lock after opening the log file, this can
    lead to having multiple instances of drmgr writing to the file at the
    same time.
    
    To do this, the patch moves the taking and releasing of the dr_lock into
    the dr_init and dr_fini routines as well as cleans up main() to make
    unlocking easier to handle.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit d6a24ab18d9e48aa90712c4dcda69425f246287b
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Sep 10 10:46:33 2013 -0500

    Update the drc-type descriptions for PCI-e Gen 3/4 slots
    
    This patch adds description strings for the newly added drc types
    defined in the PAPR. Additionally, this initializes the description
    string returned by node_type() to "Unknown", otherwise we could
    return an uninitialized string.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 7b8150e442df2f41546cb3925019c9fcb8b5b59e
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Tue Sep 10 10:44:43 2013 -0500

    Commit 8182dda resulted in excluding COPYRIGHT file from
    gzip (make dist-gzip). This causes rpmbuild to fail.
    
    Adding COPYRIGHT file to EXTRA_DIST.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit affd141c66cdd46a3a25ed7ad66e5c8096979b34
Author: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>
Date:   Tue Sep 10 10:42:54 2013 -0500

    Handle addition of timestamp information in the oops header. New format
    oops header has version in the same place as length in the old header.
    Version is assigned a value greater than oops partition size (illegal length)
    in kernel. If unzip_partition finds an illegal length, it will understand its
    new style header and parse the information accordingly. With this --unzip
    option will work with both old and new-style headers.
    
    Signed-off-by: Aruna Balakrishnaiah <aruna@linux.vnet.ibm.com>

commit 06f85125973d87c12dd297dce51e5e5cf4d91f46
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Jun 25 08:14:53 2013 -0500

    drmgr: Post processing for PCI replace
    
    During a PCI replace operation we can hit scenarios where the adapter
    was not able to completely clean everything up before it is removed.
    Such a scenario would be an adapter completely failing or just being
    pulled from its slot while the system is up.
    
    In these cases we need to add an additional remove and add to the flow
    of operations in the replace code path. This allows us to add the
    adapter back to the system which gives us enough to do a complete
    remove and clean everything up, and then add the adapter again.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 04c9a8467022f75843e9a564f3b28e132544b9cc
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Jun 25 08:14:06 2013 -0500

    drmgr: Ensure devices are present during pci replacement
    
    In some instance during a PCI replacement operations (drmgr -c pci -R)
    the adapter we are adding does not immediately appear. In these cases
    a small wait is required for the adapter to appear.
    
    This patch adds a small loop checking for the adapter's presence before
    continuing the replace operation. The update also adds an option for
    users to exit the operation if the adapter does not appear.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit ff981e0e652364d9b3a3262d315d87e26c772135
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Jun 25 08:12:40 2013 -0500

    drmgr: Check for rpadlpar_io module
    
    When attempting to do slot or phb DLPAR we need to have the rpadlpar_io
    kernel module loaded. This patch updates the check made for slot and
    phb DLPAR capabilities to also load the module if it is not present.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 8182dda83cae0d81b7c12c745ccae1932b0a52ac
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Tue Jun 25 08:11:10 2013 -0500

    Makefile: Don't install docs twice
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>

commit 288989572bcfdc272bce45e8600e7ce293184a3b
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Tue Jun 25 08:09:31 2013 -0500

    nvram: Allow deleting variables
    
    nvram --update-config myvar= to delete a variable.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>

commit c4ea6a1cbf3d3be8b47132b3e2c6bcad638e3ef6
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Tue Jun 25 08:08:01 2013 -0500

    nvram: Write complete nvram data
    
    write() may not write the entire buffer we hand it. In this case, don't
    fail, but advance along our buffer.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>

commit 1f7112d09affbf29bb354d7de3587fa2310a564d
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Tue Jun 25 08:07:11 2013 -0500

    nvram: Allow new parameters to be added
    
    Currently, we exit from update_of_config_var if we don't see an existing
    variable. This means we can't add new variables.
    
    Don't do this.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>

commit e2cc2e0e14f543a6b7e241d5a3951808eb829290
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Tue Jun 25 08:06:16 2013 -0500

    nvram: Check --update-config variables for correct format
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>

commit 976dbe9bb7b01b135cac3e7bbd1dce0cdc88636a
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Tue Jun 25 08:05:21 2013 -0500

    nvram: Allow zero-terminated output
    
    Currently, there's no way to accurately parse the outout of nvram
    --print-config: properties may contain a newline, which we can't
    distinguish from the end-of-property token.
    
    This change adds a --zero/-0 option to terminate config pairs with a
    NUL character instead.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>

commit 8d0fdf663e2a99b17bf8b001c59fb1cffaf7f185
Author: Jeremy Kerr <jk@ozlabs.org>
Date:   Tue Jun 25 08:03:55 2013 -0500

    nvram: Don't use device tree for nvram size
    
    We can query the nvram size with a seek(), which means we don't need to
    lookup in the device tree.
    
    Signed-off-by: Jeremy Kerr <jk@ozlabs.org>

powerpc-utils-1.2.17
=====================================================================
commit f54dc396cba599b1dc81892348b5db92743c9ff5
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Jun 4 06:17:07 2013 -0500

    The 'Desired Variable Capacity Weight' field in the output from lparstat -i
    is reported twice. This patch removes one of them so that it is only reporte
d
    once.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit e23f326d6c811bd923af97b7ce985961a4e42040
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Wed May 29 21:15:20 2013 -0500

    This patch does a lot of cleanup of the indentation in places to use 4
    spaces instead of tabs.  Note, this is not really what is preferred but
    what is used by this script, this change tries to make indentation
    consistent in the script.
    
    This patch also makes sure that any called commands redirect their
    error messages to /dev/null and makes sure that bootlist error messages
    are written to stderr.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit afd0a23bc1fe423ef53c914b88dc9c831a292c24
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Wed May 29 21:12:41 2013 -0500

    The bootlist command uses the ofpathname command to convert between
    logical device names and Open Firmware device path names. The current
    use of ofpathname does not correctly interpret the output and whether
    the ofpathname call succeeds or not.
    
    This patch updates the calling of ofpathname for the entire bootlist
    script to properly handle the return values and success.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 7d036c414f607c84eec890cf6343df2ce1f8dedc
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Wed May 29 21:09:04 2013 -0500

    The man page and usages statement incorrectly specify the -m option
    as the only required option. One can run the command and only specify
    the -m option, but this results in the script doing nothing.
    
    This patch updates the usage statement and man page to better specify
    the options that need to be specified when using the bootlist command.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit e5240088a6c15d9220f7c373b1bd735295a37377
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Wed May 29 21:07:12 2013 -0500

    The call to do_update on a remove property doesn't account for the null
    terminator in the length and results in the last character of the
    property name being truncated in the log.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit 5a803bf7232929d09ecb86d8f3c32c74dfd41755
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Wed May 29 21:06:02 2013 -0500

    The say() logging function allocates a static 256 byte buffer for
    messages. Messages passed to say() larger than 256 bytes result in a
    truncated message followed by garbage from past the end of the buffer being
    written to the log file. This is a result of using the return value of
    vsnprintf as the length input to the write function. Despite only
    writing no more than 256 bytes (including the trailing \0) to the buffer
    the return value of vsnprintf is actually the total number of bytes (not
    including the trailing \0) that would have been written had the buffer
    been long enough.
    
    This patch checks for truncation, labels the end of the message
    stating as much, and corrects the message length passed to write.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit 89e87c36ac6c74223054819e5a77b57b3acfaef1
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Wed May 29 21:04:44 2013 -0500

    This patch corrects the parsing of the work area buffer returned by
    ibm,update-properties. The first property descriptor is slightly
    different from the rest of the properties returned and needs to be
    handled accordingly.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit 8d818e2bd9f67aa5fad67dbe92fc294fcf52c333
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri May 17 13:30:11 2013 -0500

    Rewrote update_flash man page. Also included below details:
      - Explaination of when temporary image is committed to permanent
        side during firmware update.
      - Information on -s and -n option.
      - Added exit status.
      - Added few examples.
    
    Requested-by: Paul Clarke <pc@us.ibm.com>
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 32581ebc8413cc2064ca25a27833d91708c72616
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri May 17 13:29:27 2013 -0500

    Add new return code to check firmware entitlement expiry.
    Also display firmware GA date and system firmware entitlement
    expiry date, when we try to flash expired image (image GA date
    is beyond system entitlement date).
    
    Upper layer software wants common exit code across OS when
    entitlement expires. So I have added new exit code (E_WRNTY).
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
    Signed-off-by: Ananth N Mavinakayanahalli <ananth@in.ibm.com>

commit 7d2762892d3c28d3264dd86baf43d6ed0857f6e3
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri May 17 13:28:35 2013 -0500

    If machine supports two image areas and machine is running from
    temporary side of image, then attempt to update flash image
    may automatically commit temporary side of image to Permanent
    side.
    
    This patch introduces new flag to stop auto overwrite.
    
    Requested-by: Paul Clarke <pc@us.ibm.com>
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 0f9409e361e507ccbaf81f72bab3b27862723060
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Fri May 17 13:27:46 2013 -0500

    Fixing output display issue.
    
    Sample output without this patch :
    ---------------------------------
    Projected Flash Update Results:
    Current T Image: 20131015
    Current P Image:
    New T Image:     20131001
    New P Image:
    Flash image ready...rebooting the system...
    
    Sample output with this patch :
    ------------------------------
    Projected Flash Update Results:
    Current T Image: ZL780_211
    Current P Image: ZL780_111
    New T Image:     ZL780_211
    New P Image:     ZL780_211
    Flash image ready...rebooting the system...
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 0deb9660cffb5b313605abfeb6a2efee1a92effd
Author: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>
Date:   Fri May 17 13:22:37 2013 -0500

    Timing out memory remove operations before fulfilling the request can
    result in attempts to unsuccesfully remove the same LMBs on repeated
    requests. This patch implements a simple shuffle algorithm to randomize
    the LMB list.
    
    Signed-off-by: Tyrel Datwyler <tyreld@linux.vnet.ibm.com>

commit f247375409a7beece8271833f8a924f3075086fc
Author: Robert Jennings <rcj@linux.vnet.ibm.com>
Date:   Fri May 17 13:18:23 2013 -0500

    This patch changes logic around quanity requested and # sections removable
    for memory remove.  Previously, if you had requested X but some non-zero
    quantify less than X were available it would bail.  Now it will attempt
    to remove as many as are available.  For this case it is still considered
    a partial success and a non-zero (error) return code is given so that
    output is displayed on the management console.
    
    Messages for the memory remove code path are impoved and some message
    logging levels are changed.  Messages now indicate situations that are
    really bugs and should be looked at by support.  For those cases it also
    points the user to /var/log/drmgr for the debug logs.
    
    Here are output examples for the different levels:
    
    ERROR level (1):
    HSCL2932 The dynamic removal of memory resources failed: The operating syste
m prevented all of the requested memory from being removed. Amount of memory rem
oved: 0 MB of 256 MB. The detailed output of the OS operation follows:
    Validating Memory DLPAR capability...yes.
    Removed 0 of 1 requested lmb(s)
    Unable to hotplug remove the remaining 1 lmb(s)
    
    INFO level (3):
    HSCL2932 The dynamic removal of memory resources failed: The operating syste
m prevented all of the requested memory from being removed. Amount of memory rem
oved: 0 MB of 1024 MB. The detailed output of the OS operation follows:
    Validating Memory DLPAR capability...yes.
    Maximum of 24 LMBs
    Found 16 LMBs currently allocated
    Only 2 LMBs are currently candidates for removal.
    Attempting to offline LMB15.
    Could not offline LMB15 at this time.
    Attempting to offline LMB4.
    Could not offline LMB4 at this time.
    Removed 0 of 4 requested lmb(s)
    Unable to hotplug remove the remaining 4 lmb(s)
    
    DEBUG level (4):
    HSCL2932 The dynamic removal of memory resources failed: The operating syste
m prevented all of the requested memory from being removed. Amount of memory rem
oved: 0 MB of 1024 MB. The detailed output of the OS operation follows:
    
    drmgr: -r -c mem -q 4 -w 5 -d 4
    Validating Memory DLPAR capability...yes.
    Maximum of 24 LMBs
    Found 16 LMBs currently allocated
    AMS ballooning is not active
    Only 2 LMBs are currently candidates for removal.
    Attempting removal of 2 lmbs
    AMS ballooning is not active
    Found available LMB, LMB15, drc index 0x8000000e
    Attempting to offline LMB15.
    14:47:56: Marking /sys/devices/system/memory/memory224 offline
    14:47:56: Could not offline /sys/devices/system/memory/memory224.
    Could not offline LMB15 at this time.
    AMS ballooning is not active
    Found available LMB, LMB4, drc index 0x80000003
    Attempting to offline LMB4.
    14:47:57: Marking /sys/devices/system/memory/memory48 offline
    14:47:57: Could not offline /sys/devices/system/memory/memory48.
    Could not offline LMB4 at this time.
    AMS ballooning is not active
    Removed 0 of 4 requested lmb(s)
    Unable to hotplug remove the remaining 4 lmb(s)
    Rotating logs...
    
    Signed-off-by: Robert Jennings <rcj@linux.vnet.ibm.com>

commit 43b90cbd9d5c196e5a18151fb0c9ddaf944bf604
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Fri May 17 13:16:42 2013 -0500

    The output level should check for a level less than or equal to the desired
    output level. The current check is wrong and we always get all of the output
.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>
    Acked-by: Robert Jennings <rcj@linux.vnet.ibm.com>

commit 0fd2eff3a908566132e845d606204192aae3ba92
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Fri May 17 13:15:31 2013 -0500

    The code to see if AMS ballooning is active has the side affect of outputtin
g
    a message every time it is checked, which is often. This patch updates drmgr
    so that the check for AMS ballooning and its message are only done once the
    first time it is checked. Any subsequent checks just return the previous
    results.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 69639d89d4f31df6591da4649627a8374252f90a
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Fri May 17 13:13:51 2013 -0500

    The ppc64_cpu command incorrectly reports the smt snooze delay value of
    -1 as an error in that the value is inconsistent across the cpus on the
    system. This patch updates the command to properly this value by
    separating the tracking of inconsistent values from the return codes from
    retrieving the value.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>
    Reported-and-tested-by: Deepthi Dharwar <deepthi@linux.vnet.ibm.com>

commit 38b53c903b1be01f177049a27cb77acc44828aef
Merge: 2857828 1d06f70
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Fri May 17 08:44:01 2013 -0500

    Merge branch 'master' of ssh://nfont@powerpc-utils.git.sourceforge.net/gitro
ot/powerpc-utils/powerpc-utils

commit 2857828cc6bfdb612c5b249be86692e4ac03d35f
Author: Kamalesh Babulal <kamalesh@linux.vnet.ibm.com>
Date:   Tue Apr 23 08:46:10 2013 -0500

    kernel commit 404e32e4a8f68d2, supports lower minimum entitlement
    for virtual processors such as 0.05 processing units. This patch
    modifies get_percent_entry() to support these lower values.
    
    Signed-off-by: Kamalesh Babulal <kamalesh@linux.vnet.ibm.com>

commit 1d06f7091ada23c8efa49b9af5b35e3b5e6b3547
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Apr 23 08:46:10 2013 -0500

    kernel commit 404e32e4a8f68d2, supports lower minimum entitlement
    for virtual processors such as 0.05 processing units. This patch
    modifies get_percent_entry() to support these lower values.
    
    Signed-off-by: Kamalesh Babulal <kamalesh@linux.vnet.ibm.com>

commit 7ad241bf127e3e0787140f4712f7f18be8f6f11d
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Apr 23 08:43:46 2013 -0500

    The drmgr command has always taken the -w option to specify
    how long to try an operation before timing out. Historically
    this option was always ignored, and then at some point used to
    time out when trying to acquire the drmgr lock.
    
    As we see larger systems coming around we need to start honoring
    this option so we do not consume unneeded time going through every
    possible LMB and CPU on the system.
    
    This patch saves the timeout specified on the command line (-w)
    and then checks it while trying to take the drmgr lock and before
    each CPU/LMB it tries to add/remove. If no timeout is specified
    then drmgr will never timeout.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

powerpc-utils-1.2.16
=====================================================================
commit 0c358d8d7391f99d02315786871735f73eba8af1
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Fri Feb 1 17:57:47 2013 -0600

    The drmgr command does not currently allow users to specify the drc index of
    the resource they wish to add/remove. This patch updates the drmgr command s
o
    that users can specify either a drc name or a drc index with the -s option.
    
    This functionality is needed for the upcoming userspace handling of PRRN RTA
S
    events. The rtas_errd will already have the drc index for the resources it
    needs, adding the capability to parse drc names from the device tree is not
    supported in rtas_errd though.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 91459f3188bb9db0ac8da23133d7330520520728
Author: Robert Jennings <rcj@linux.vnet.ibm.com>
Date:   Fri Feb 1 17:56:20 2013 -0600

    Update the man page for update_flash which had an out of date link
    to instructions for resetting a managed system to a non-partitioned
    configuration.
    
    Also fix typos in the man page.
    
    Signed-off-by: Robert Jennings<rcj@linux.vnet.ibm.com>

commit 837eaff650ab19784b6b04d2d14fb29c966a485f
Author: Nishanth Aravamudan <nacc@us.ibm.com>
Date:   Fri Feb 1 17:42:53 2013 -0600

    The upstream kernel has a feature in the pseries PCI code called DDW
    that inserts TCEs transparently to device drivers. The upstream kernel
    was recently sent a fix for DLPAR that ensured those TCEs would get
    cleared upon DLPAR remove (http://patchwork.ozlabs.org/patch/213735/),
    but for it to work, we need a corresponding change to drmgr for, at
    least, PHB remove, so that the notifier chain has fired before we call
    into the slot isolate code. Without such a change, there is no way to
    ensure the DDW TCEs are cleared, and the DLPAR will always fail.
    
    Signed-off-by: Nishanth Aravamudan <nacc@us.ibm.com>

commit 85325c113104602a257a0f7cf3da0dbd5d222d56
Author: Michael Ellerman <michael@ellerman.id.au>
Date:   Mon Jan 7 20:42:01 2013 -0600

    Add and use dt_swap_int() to byte swap on little endian.
    
    Also declare buf as unsigned char, so that we don't sign extend when
    printing values from it.
    
    Signed-off-by: Michael Ellerman <michael@ellerman.id.au>
    Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>


powerpc-utils-1.2.15
=====================================================================
commit 3f31d1980331cb72d3328269f27de4c8d3132178
Author: Anton Blanchard <anton@samba.org>
Date:   Tue Dec 18 12:10:20 2012 -0600

    The frequency determination for a system can fail if we can not open
    enough files to make the determination. This patch pre-emptively
    updates the rlimit to ensure we can open all the files necessary.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit 8d8e98514aeae82966123eed1a4f5c79e2f1a758
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Tue Dec 18 12:02:48 2012 -0600

    The latest firmware levels allow for setting different power savings
    modes. This updates the ppc64_cpu command to display the power savings
    mode that is currently set for the partition, or for the partition
    and the system if they are different, when displaying the results
    for the --frequency option.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

commit e22d290b980dedbe4e6d297e0a1f4c0517e7f9db
Author: Gustavo Luiz Duarte <gustavold@linux.vnet.ibm.com>
Date:   Thu Dec 13 09:26:49 2012 -0600

    Add support to convert device-mapper multipath device names to OFW device pa
th.
    As multipath devices are seen by the OFW as multiple (equivalent) devices, o
nly
    one of them is printed so we don't break user scripts expecting one line
    output. We can add an option later to print all the paths to the multipath
    device.
    
    Signed-off-by: Gustavo Luiz Duarte <gustavold@linux.vnet.ibm.com>

commit 3eacc075d455b91a23a2280ee726fd3d236abf77
Author: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
Date:   Wed Dec 12 10:08:38 2012 -0600

    We have introduced full fledged Light Path Diagnostics support
    on PowerLinux. To bring all Light Path Diagnostics related
    code into common tree and re-use common functionalities across
    tools, we have re-implemented usysident/usysattn commands. Light
    Path Diagnostics including new implentation of usysident/usysattn
    will be hosted in PowerLinux diagnostic package (ppc64-diag).
    
    ppc64-diag source:
      http://sourceforge.net/projects/linux-diag/files/ppc64-diag/
    
    This will introduce package conflict between ppc64-diag and
    powerpc-utils. To avoid the conflict we need to deprecate the
    usysident/usysattn commands from powerpc-utils.
    
    This patch deprecates usysident/usysattn commands.
    
    Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>

commit 588df55fa1e0c0061776aa4338512a4b56614b93
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Wed Dec 12 09:24:17 2012 -0600

    Update the values reported in the ppc64_cpu --frequency output to
    be displayed to three digits of precision instead of two.
    
    This update to help with test teams that are making this update to their
    code base already so as to get this precision in the reporting.
    
    Signed-off-by: Nathan Fontenot <nfont@linux.vnet.ibm.com>

powerpc-utils-1.2.14
=====================================================================
commit 54b295ff2ec131d173ebf3913565adbe4a5f0c2f
Author: Nathan Fontenot <nfont@linux.vnet.ibm.com>
Date:   Wed Oct 17 13:47:49 2012 -0400

    The latest kernels allow for users to get/set the DSCR value on a per proces
    This allows for more refined DSCR setting in applications. This is implement
    by using the ptrace peekuser capabilites in the kernel and simply doing a
    ptrace attach and peek from the ppc64_cpu command. Note: this does not actua
    stop the process we are attaching to while under ptrace control.
    
    The patch does a little more than just adding this functionality since the
    --dscr commad now takes an optional -p <pid> option. This required an
    updated to the command parsing code to allow this.
    
    Signed-off-by: Nathan Fontenot <nfont@liunux.vnet.ibm.com>

commit 90029c93af26f01ef37624fd9d27809d6734f5f7
Author: Santiago Leon <santil@linux.vnet.ibm.com>
Date:   Wed Oct 17 13:35:14 2012 -0400

    Includes the status field for Ethernet devices.  This field is necessary for
    the End-to-End Virtual Device View feature.  The field is blindly set to 1
    because we're trying to mimic AIX's lsdevinfo behavior that always sets it t
    unless the device doesn't have a driver, which can't happen in Linux.
    
    Signed-off-by: Santiago Leon <santil@linux.vnet.ibm.com>

powerpc-utils-1.2.13
=====================================================================
commit 361dcc6ee5ca8a41b311b0c82c88d4633c884b2a
Author: Vasant Hegde <vahegde1@linux.vnet.ibm.com>
Date:   Thu Aug 16 08:31:59 2012 -0500

    Adding more power specific files/commands to snap.
    
    Signed-off-by: Vasant Hegde <vahegde1@linux.vnet.ibm.com>

commit 5d1fcd0a882f1e5f0b569b1dab29ee5f55801583
Author: Breno Leitao <brenohl@br.ibm.com>
Date:   Thu Jun 14 09:31:47 2012 -0500

    There are two parameters on lparstat, count and interval, that were
    undocumented on the man page. This patch adds these parameters to the
    option section in the lparstat manpage.
    
    Signed-off-by: Breno Leitao <brenohl@br.ibm.com>

commit 7fb183b52bc01e839529f1ac669fc488d3a047ac
Author: Vasant Hegde <vahegde1@linux.vnet.ibm.com>
Date:   Thu Jun 14 09:24:44 2012 -0500

    snap uses temporary directory to gather system data (files and command
    output), and finally creates compressed output file in tar or tar.gz
    format. We do not need to keep the temporary directory.
    
    This patch deletes the temprory directory used by snap.
    
    Signed-off-by: Vasant Hegde <vahegde1@linux.vnet.ibm.com>

commit 8666fe0e239266cff9cfc41907018913877bb9de
Author: Vasant Hegde <vahegde1@linux.vnet.ibm.com>
Date:   Thu Jun 14 09:24:08 2012 -0500

    Currently by default snap output is stored in snap.tar.gz file. This
    makes difficult to identify when the snap output was collected.
    
    This patch introduces new option -t which adds hostname adds and
    system time to output filename. With -t output filename will be
    snap-<hostname>-<systemtime>.tar.gz. This patch also creates
    snap_commands directory inside $outdir to save output of commands
    executed by snap.
    
    Signed-off-by: Vasant Hegde <vahegde1@linux.vnet.ibm.com>

commit 76f59b3090b6a1d5718206026f915b92aaa6fddd
Author: Vasant Hegde <vahegde1@linux.vnet.ibm.com>
Date:   Thu Jun 14 09:22:52 2012 -0500

    Currently snap does not validate the directory name and output filename pass
ed
    with snap options -d and -o respectively. If we pass existing directory whic
h
    contains files/other subdirectories with -d option, while creating the outpu
t
    (snap.tar.gz) it includes all those files which is wrong. If we pass existin
g
    filename with -o option it will override existing file.
    
    This patch fixes above mentioned issue by validating input parameter
    passed to snap command.
    
    Signed-off-by: Vasant Hegde <vahegde1@linux.vnet.ibm.com>

commit fe4836e3d8a6f466e2321e6beaf3bfe5d8fab262
Author: Vasant Hegde <vahegde1@linux.vnet.ibm.com>
Date:   Thu Jun 14 09:22:19 2012 -0500

    Restrict the unsafe constructs by using "use strict" perl pragma
    and hence make snap code better.
    
    Signed-off-by: Vasant Hegde <vahegde1@linux.vnet.ibm.com>

commit c600f2910674f2afb8059abbe3addb593828a8cd
Author: Santiago Leon <santil@linux.vnet.ibm.com>
Date:   Mon Apr 16 08:49:18 2012 -0500

    Adds support for physical ethernet devices so that the HMCs end-to-end
    virtual device view can show SR-IOV VFs. Moves common virtual and physical
    ethernet code to show_eth() function
    
    Signed-off-by: Santiago Leon <santil@linux.vnet.ibm.com>
